# Conquest DICOM docker image

This is a simple dockerized version of the Conquest DICOM server (see https://github.com/marcelvanherk/Conquest-DICOM-Server). 
This docker image contains just the basic dgate executable without the web interface.
Building the docker image is simple:

```
docker build -t rzinkstok/conquest .
```

The service can be started using `docker-compose`::

```
cd compose
docker-compose up -d
```

## Mounted folders

- `compose/data`: the folder containing DICOM files
- `compose/dbase`: the sqlite database files
- `compose/logs`: the log files generated by the dgate application
- `compose/config`: the configuration files used by dgate

## Configuration

Configuration of the server can be done through the `compose/config/dicom.ini` file. Mainly interesting here
are the AETitle and the port, as well as import and export converters. A restart of the server is needed for
configuration changes to be picked up.

For communication with other DICOM nodes, it is necessary to add them to the `compose/config/acrnema.map`. Remember
to use the hostname alias (`host.docker.internal`) for DICOM nodes running on the host machine. 


## To do

- Perhaps it is simpler to use Ansible, so you can parametrize server parameters like AETitle and port number. Or go to Kubernetes/Helm charts.
- Move to serious database, using a separate MySQL or PostgreSQL container
- ...

### Needed per instance:
- aetitle -> envvar
- port -> envvar
- acrnema.map -> single file for all?
- data folder -> 
- dbase -> add mysql container
- logs -> volume
- import/export converters
- scripts -> volume
- option for restarting service

### Networking
Default Docker networking only allows communications to the host (and other containers in the same compose setup).
This can be problematic if the Conquest server needs to communicate with nodes on other machines.
